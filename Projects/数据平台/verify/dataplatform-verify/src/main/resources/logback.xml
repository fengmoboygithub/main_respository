<?xml version="1.0"?>
<!-- Reference Manual http://logback.qos.ch/manual/index.html -->

<configuration scan="true">

	<!-- 日志输出格式 -->
    <property name="ENCODER_PATTERN"
              value="%d{yyyy-MM-dd  HH:mm:ss} [%thread] %-5level %logger{80} - %msg%n" />

	<!-- 输出信息到控制台 -->
	<appender name="stdout" class="ch.qos.logback.core.ConsoleAppender">
		<encoder charset="UTF-8">
			<!-- 显示毫秒数 <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger - %msg%n</pattern> -->
			<pattern>${ENCODER_PATTERN}</pattern>
		</encoder>
	</appender>
	<!-- 输出info，debug信息 -->
	<appender name="RollingDEBUFFile" class="ch.qos.logback.core.rolling.RollingFileAppender">
	
		<!-- <filter class="ch.qos.logback.classic.filter.LevelFilter">只打印错误日志
			<level>INFO</level>
			<level>DEBUG</level> 只打印debug信息
		</filter> -->
		<!-- 可让每天产生一个日志文件，最多 10 个，自动回滚 -->
		<!-- <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"> -->
		<rollingPolicy class="otc.tech.util.RollingCustomLogBackFileAppender">
		<!-- ${catalina.base}/reportsys_log/reportsysdebufug-%d{yyyy-MM-dd}.log 
			 /log/reportsys_log/reportsys_slf4j_%d{yyyyMMdd}.log
		-->
			<fileNamePattern>
				 /logs/reportsys_log/reportsys_slf4j_%d{yyyyMMdd}.log
			</fileNamePattern>
				<!-- 从config.properties配置文件去读取fileNamePattern -->
			<maxHistory>60</maxHistory>
		</rollingPolicy>
		<append>false</append>
		<encoder>
			<pattern>${ENCODER_PATTERN}</pattern>
		</encoder>
	</appender>
	
	
	<appender name="UnifiedAccountFILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!--定义日志输出的路径-->
<!--         <file>/log/reportsys_log/UnifiedAccount_slf4j_%d{yyyyMMdd}.log</file>
 -->        <!--定义日志滚动的策略-->
        <rollingPolicy class="otc.tech.util.RollingCustomLogBackFileAppender">
            <!--定义文件滚动时的文件名的格式-->
            <fileNamePattern>
          		 /logs/UnifiedAccount_log/UnifiedAccount_slf4j_%d{yyyyMMdd}.log
            </fileNamePattern>
            <!--60天的时间周期，日志量最大20GB-->
            <maxHistory>60</maxHistory>
            <!-- 该属性在 1.1.6版本后 才开始支持-->
<!--             <totalSizeCap>20GB</totalSizeCap>
 -->        </rollingPolicy>
        <!-- <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            每个日志文件最大100MB
            <maxFileSize>100MB</maxFileSize>
        </triggeringPolicy> -->
        <!--定义输出格式-->
        <encoder>
            <pattern>${ENCODER_PATTERN}</pattern>
        </encoder>
    </appender>

	<root level="error">
	<!-- <root level="debug"> -->
		<!-- <level>ERROR</level> -->
		<appender-ref ref="RollingDEBUFFile" />
		<appender-ref ref="stdout" />
	</root>
	
	
	<!--通过 LoggerFactory.getLogger("UnifiedAccount") 可以获取到这个logger-->
    <!--additivity表示要不要使用rootLogger配置的appender进行输出-->
	<logger name="UnifiedAccount" level="info" additivity="false">
        <appender-ref ref="UnifiedAccountFILE"/>
    </logger>

</configuration>